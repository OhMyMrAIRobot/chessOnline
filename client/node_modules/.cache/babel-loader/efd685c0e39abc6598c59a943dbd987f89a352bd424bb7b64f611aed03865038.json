{"ast":null,"code":"import { Figure, FigureNames } from \"./Figure\";\nimport { Colors } from \"../Colors\";\nimport blackImg from \"../../resourses/images/black-pawn.png\";\nimport whiteImg from \"../../resourses/images/white-pawn.png\";\nexport class Pawn extends Figure {\n  constructor(color, cell) {\n    super(color, cell);\n    this._isFirstStep = true;\n    this._img = color === Colors.BLACK ? blackImg : whiteImg;\n    this._name = FigureNames.PAWN;\n  }\n  canMove(target) {\n    var _this$_cell$_figure, _this$_cell$_figure2;\n    if (!super.canMove(target)) return false;\n    const direction = ((_this$_cell$_figure = this._cell._figure) === null || _this$_cell$_figure === void 0 ? void 0 : _this$_cell$_figure._color) === Colors.BLACK ? 1 : -1;\n    const firstStepDirection = ((_this$_cell$_figure2 = this._cell._figure) === null || _this$_cell$_figure2 === void 0 ? void 0 : _this$_cell$_figure2._color) === Colors.BLACK ? 2 : -2;\n\n    // TODO: пофиксить переход через фигуру на первом ходу\n    if ((target._y === this._cell._y + direction || this._isFirstStep && target._y === this._cell._y + firstStepDirection) && target._x === this._cell._x && this._cell._board.getCell(target._x, target._y).isEmpty()) {\n      return true;\n    }\n    if (target._y === this._cell._y + direction && (target._x === this._cell._x + 1 || target._x === this._cell._x - 1) && this._cell.isEnemy(target)) {\n      return true;\n    }\n    return false;\n  }\n  moveFigure(target) {\n    super.moveFigure(target);\n    this._isFirstStep = false;\n  }\n}","map":{"version":3,"names":["Figure","FigureNames","Colors","blackImg","whiteImg","Pawn","constructor","color","cell","_isFirstStep","_img","BLACK","_name","PAWN","canMove","target","_this$_cell$_figure","_this$_cell$_figure2","direction","_cell","_figure","_color","firstStepDirection","_y","_x","_board","getCell","isEmpty","isEnemy","moveFigure"],"sources":["/Users/mrairobot/Desktop/main/ksis/Online_Chess/client/src/models/figures/Pawn.ts"],"sourcesContent":["import {Figure, FigureNames} from \"./Figure\";\nimport {Colors} from \"../Colors\";\nimport {Cell} from \"../Cell\";\nimport blackImg from \"../../resourses/images/black-pawn.png\";\nimport whiteImg from \"../../resourses/images/white-pawn.png\";\n\nexport class Pawn extends Figure {\n\n    _isFirstStep: boolean = true;\n\n    constructor(color: Colors, cell: Cell) {\n        super(color, cell);\n        this._img = color === Colors.BLACK ? blackImg : whiteImg;\n        this._name = FigureNames.PAWN;\n    }\n\n    canMove(target: Cell): boolean {\n        if(!super.canMove(target))\n            return false;\n\n        const direction = this._cell._figure?._color === Colors.BLACK ? 1 : -1;\n        const firstStepDirection = this._cell._figure?._color === Colors.BLACK ? 2 : -2;\n\n        // TODO: пофиксить переход через фигуру на первом ходу\n        if ((target._y === this._cell._y + direction || this._isFirstStep && (target._y === this._cell._y + firstStepDirection))\n            && target._x === this._cell._x\n            && this._cell._board.getCell(target._x, target._y).isEmpty()) {\n            return true;\n        }\n\n        if (target._y === this._cell._y + direction\n            && (target._x === this._cell._x + 1 || target._x === this._cell._x - 1)\n            && this._cell.isEnemy(target)) {\n            return true;\n        }\n\n        return false;\n    }\n\n    moveFigure(target: Cell) {\n        super.moveFigure(target);\n        this._isFirstStep = false;\n    }\n}"],"mappings":"AAAA,SAAQA,MAAM,EAAEC,WAAW,QAAO,UAAU;AAC5C,SAAQC,MAAM,QAAO,WAAW;AAEhC,OAAOC,QAAQ,MAAM,uCAAuC;AAC5D,OAAOC,QAAQ,MAAM,uCAAuC;AAE5D,OAAO,MAAMC,IAAI,SAASL,MAAM,CAAC;EAI7BM,WAAWA,CAACC,KAAa,EAAEC,IAAU,EAAE;IACnC,KAAK,CAACD,KAAK,EAAEC,IAAI,CAAC;IAAC,KAHvBC,YAAY,GAAY,IAAI;IAIxB,IAAI,CAACC,IAAI,GAAGH,KAAK,KAAKL,MAAM,CAACS,KAAK,GAAGR,QAAQ,GAAGC,QAAQ;IACxD,IAAI,CAACQ,KAAK,GAAGX,WAAW,CAACY,IAAI;EACjC;EAEAC,OAAOA,CAACC,MAAY,EAAW;IAAA,IAAAC,mBAAA,EAAAC,oBAAA;IAC3B,IAAG,CAAC,KAAK,CAACH,OAAO,CAACC,MAAM,CAAC,EACrB,OAAO,KAAK;IAEhB,MAAMG,SAAS,GAAG,EAAAF,mBAAA,OAAI,CAACG,KAAK,CAACC,OAAO,cAAAJ,mBAAA,uBAAlBA,mBAAA,CAAoBK,MAAM,MAAKnB,MAAM,CAACS,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;IACtE,MAAMW,kBAAkB,GAAG,EAAAL,oBAAA,OAAI,CAACE,KAAK,CAACC,OAAO,cAAAH,oBAAA,uBAAlBA,oBAAA,CAAoBI,MAAM,MAAKnB,MAAM,CAACS,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;;IAE/E;IACA,IAAI,CAACI,MAAM,CAACQ,EAAE,KAAK,IAAI,CAACJ,KAAK,CAACI,EAAE,GAAGL,SAAS,IAAI,IAAI,CAACT,YAAY,IAAKM,MAAM,CAACQ,EAAE,KAAK,IAAI,CAACJ,KAAK,CAACI,EAAE,GAAGD,kBAAmB,KAChHP,MAAM,CAACS,EAAE,KAAK,IAAI,CAACL,KAAK,CAACK,EAAE,IAC3B,IAAI,CAACL,KAAK,CAACM,MAAM,CAACC,OAAO,CAACX,MAAM,CAACS,EAAE,EAAET,MAAM,CAACQ,EAAE,CAAC,CAACI,OAAO,CAAC,CAAC,EAAE;MAC9D,OAAO,IAAI;IACf;IAEA,IAAIZ,MAAM,CAACQ,EAAE,KAAK,IAAI,CAACJ,KAAK,CAACI,EAAE,GAAGL,SAAS,KACnCH,MAAM,CAACS,EAAE,KAAK,IAAI,CAACL,KAAK,CAACK,EAAE,GAAG,CAAC,IAAIT,MAAM,CAACS,EAAE,KAAK,IAAI,CAACL,KAAK,CAACK,EAAE,GAAG,CAAC,CAAC,IACpE,IAAI,CAACL,KAAK,CAACS,OAAO,CAACb,MAAM,CAAC,EAAE;MAC/B,OAAO,IAAI;IACf;IAEA,OAAO,KAAK;EAChB;EAEAc,UAAUA,CAACd,MAAY,EAAE;IACrB,KAAK,CAACc,UAAU,CAACd,MAAM,CAAC;IACxB,IAAI,CAACN,YAAY,GAAG,KAAK;EAC7B;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}